{% extends "base.html" %}

{% block title %}System Analytics - AI Mentoring System{% endblock %}

{% block nav_links %}
<div class="bg-purple-500 border-t border-purple-400">
    <div class="container mx-auto px-4">
        <div class="flex space-x-1 py-2">
            <a href="{{ url_for('admin_dashboard') }}"
               class="flex items-center space-x-2 px-4 py-2 rounded-lg hover:bg-purple-400 transition-colors duration-200 text-sm font-medium">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            <a href="{{ url_for('pending_mentors') }}"
               class="flex items-center space-x-2 px-4 py-2 rounded-lg hover:bg-purple-400 transition-colors duration-200 text-sm font-medium">
                <i class="fas fa-user-clock"></i>
                <span>Pending Mentors</span>
            </a>
            <a href="{{ url_for('mentor_matching') }}"
               class="flex items-center space-x-2 px-4 py-2 rounded-lg hover:bg-purple-400 transition-colors duration-200 text-sm font-medium">
                <i class="fas fa-users"></i>
                <span>Matching</span>
            </a>
            <a href="{{ url_for('admin_analytics') }}"
               class="flex items-center space-x-2 px-4 py-2 rounded-lg bg-purple-400 text-sm font-semibold nav-link-active">
                <i class="fas fa-chart-bar"></i>
                <span>Analytics</span>
            </a>
            <a href="{{ url_for('admin_users') }}"
               class="flex items-center space-x-2 px-4 py-2 rounded-lg hover:bg-purple-400 transition-colors duration-200 text-sm font-medium">
                <i class="fas fa-users-cog"></i>
                <span>Users</span>
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold text-gray-800 mb-6">
    <i class="fas fa-chart-bar text-purple-600"></i> System Analytics
</h1>

<!-- Analytics Cards -->
<div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <div class="bg-white p-6 rounded-lg shadow">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-gray-600 text-sm">Total Students</p>
                <p class="text-3xl font-bold text-blue-600">{{ analytics.total_students }}</p>
            </div>
            <i class="fas fa-user-graduate text-4xl text-blue-300"></i>
        </div>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-gray-600 text-sm">Total Mentors</p>
                <p class="text-3xl font-bold text-green-600">{{ analytics.total_mentors }}</p>
            </div>
            <i class="fas fa-chalkboard-teacher text-4xl text-green-300"></i>
        </div>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-gray-600 text-sm">Total Sessions</p>
                <p class="text-3xl font-bold text-purple-600">{{ analytics.total_sessions }}</p>
            </div>
            <i class="fas fa-calendar-check text-4xl text-purple-300"></i>
        </div>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-gray-600 text-sm">Active Mentorships</p>
                <p class="text-3xl font-bold text-yellow-600">{{ analytics.active_mentorships }}</p>
            </div>
            <i class="fas fa-handshake text-4xl text-yellow-300"></i>
        </div>
    </div>
</div>

<!-- Additional Metrics -->
<div class="grid md:grid-cols-2 gap-6">
    <div class="bg-white rounded-lg shadow p-6">
        <h2 class="text-xl font-bold mb-4">System Health</h2>
        <div class="space-y-3">
            <div class="flex items-center justify-between">
                <span class="text-gray-600">Mentorship Coverage</span>
                <span class="font-semibold">
                    {% if analytics.total_students > 0 %}
                    {{ "%.1f"|format((analytics.active_mentorships / analytics.total_students) * 100) }}%
                    {% else %}
                    0%
                    {% endif %}
                </span>
            </div>
            <div class="flex items-center justify-between">
                <span class="text-gray-600">Pending Applications</span>
                <span class="font-semibold text-yellow-600">{{ analytics.pending_mentors }}</span>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow p-6">
        <h2 class="text-xl font-bold mb-4">Activity Summary</h2>
        <div class="space-y-3">
            <div class="flex items-center justify-between">
                <span class="text-gray-600">Total Assessments</span>
                <span class="font-semibold">{{ analytics.total_assessments }}</span>
            </div>
            <div class="flex items-center justify-between">
                <span class="text-gray-600">System Status</span>
                <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">Operational</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}

